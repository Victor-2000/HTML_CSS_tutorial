<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Hi there</h1>

    <script src="../../jquery-3.5.1.js"></script>
    <script>
      (function ($) {
        var obj = $({});

        $.each(
          {
            trigger: "publish",
            on: "subscribe",
            off: "unsubscribe",
          },
          function (key, val) {
            $[val] = function () {
              obj[key].apply(obj, arguments);
            };
          }
        );
      })(jQuery);
      for (let i = 0; i < 4; i++) {
        $.getJSON(
          "https://api.thecatapi.com/v1/images/search?size=small&mime_types=gif",
          function (results) {
            $.publish("twitter/results", results);
          }
        );
      }

      $.subscribe("twitter/results", function (e, results) {
        console.log(results);
        $("body").append("<li>" + results["url"] + "</li>");
      });
    </script>
  </body>
</html>
